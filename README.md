# ğŸš€ AgentOS é¡¹ç›®è¿è¡ŒæŒ‡å—

æ¬¢è¿ä½¿ç”¨ AgentOS ç³»ç»Ÿï¼æœ¬æŒ‡å—å°†å¼•å¯¼æ‚¨å®Œæˆé¡¹ç›®ç¯å¢ƒçš„å‡†å¤‡ã€ä¸åŒæ¨¡å¼çš„è¿è¡Œå’Œä»»åŠ¡çš„æäº¤æµç¨‹ã€‚

## ç›®å½•

  - [AgentOS æ ¸å¿ƒæ¡†æ¶è¿è¡ŒæŒ‡å—](#agent-core)
  - [Baseline (HEFT/CPOP) è¿è¡ŒæŒ‡å—](#baseline)
  - [Agent æ¡†æ¶é›†æˆè¿è¡ŒæŒ‡å—](#zhinan)
      - [AutoGen æ¨¡å¼](#autogen)
      - [AgentScope æ¨¡å¼](#agentscope)

-----

## ğŸ“¦ AgentOS æ ¸å¿ƒæ¡†æ¶è¿è¡ŒæŒ‡å— {#agentos-core}

æ­¤éƒ¨åˆ†ä»‹ç»å¦‚ä½•è¿è¡Œ AgentOS çš„æ ¸å¿ƒè°ƒåº¦ç³»ç»Ÿã€‚

### 1\. ç¯å¢ƒå‡†å¤‡

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸ºé¡¹ç›®åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ Conda ç¯å¢ƒå¹¶å®‰è£…æ‰€æœ‰ä¾èµ–ã€‚

```bash
# åˆ›å»ºä¸€ä¸ªåä¸º agentos çš„ Python 3.10 ç¯å¢ƒ
conda create --name agentos python==3.10

# æ¿€æ´»æ–°åˆ›å»ºçš„ç¯å¢ƒ
conda activate agentos

# å®‰è£…æ‰€æœ‰å¿…è¦çš„ä¾èµ–åº“
pip install -r requirements.txt
```

### 2\. å¯åŠ¨åŸºç¡€æœåŠ¡

AgentOS çš„è¿è¡Œä¾èµ–äº Ray é›†ç¾¤å’Œ Redis æœåŠ¡ã€‚

#### å¯åŠ¨ Ray é›†ç¾¤

Ray ç”¨äºåˆ†å¸ƒå¼è®¡ç®—å’Œä»»åŠ¡æ‰§è¡Œã€‚

```bash
# åœ¨å¤´èŠ‚ç‚¹ï¼ˆHead Nodeï¼‰ä¸Šå¯åŠ¨ Ray
ray start --head

# åœ¨å…¶ä»–å·¥ä½œèŠ‚ç‚¹ï¼ˆWorker Nodeï¼‰ä¸Šå¯åŠ¨ Rayï¼Œå¹¶å°†å…¶è¿æ¥åˆ°å¤´èŠ‚ç‚¹
# è¯·å°† 'head_node_ip:head_node_port' æ›¿æ¢ä¸ºå¤´èŠ‚ç‚¹çš„å®é™… IP å’Œç«¯å£
ray start --address='head_node_ip:head_node_port'
```

#### å¯åŠ¨ Redis æœåŠ¡

Redis åœ¨è¿™é‡Œç”¨ä½œæ¶ˆæ¯é˜Ÿåˆ—å’Œæ•°æ®å­˜å‚¨ã€‚

```bash
# å¯åŠ¨ä¸€ä¸ª Redis æœåŠ¡ï¼Œç›‘å¬åœ¨ 6380 ç«¯å£
redis-server --port 6380 --bind 0.0.0.0 --protected-mode no &
```

> **æ³¨æ„**: åœ¨å®éªŒå®¤çš„ `node10` æœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ Docker å¯åŠ¨ Redisï¼Œç›®å‰è¯¥æœåŠ¡å·²é…ç½®å¹¶è¿è¡Œï¼Œæ‚¨å¯ä»¥é€šè¿‡ `docker ps` å‘½ä»¤æŸ¥çœ‹ã€‚

### 3\. å¯åŠ¨ AgentOS æœåŠ¡

AgentOS åˆ†ä¸ºèµ„æºå±‚å’Œè°ƒåº¦å±‚ï¼Œéœ€è¦ä¾æ¬¡å¯åŠ¨ã€‚

#### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨èµ„æºå±‚ (Resource Layer)

èµ„æºå±‚è´Ÿè´£ç®¡ç†å’Œæä¾›åº•å±‚çš„è®¡ç®—èµ„æºã€‚

```bash
cd AgentOS/src/agentos/resource
python api_server.py --redis_ip 127.0.0.1 --redis_port 6380 --flask_port 5000
```

#### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨è°ƒåº¦å±‚ (Scheduler Layer)

è°ƒåº¦å±‚è´Ÿè´£æ¥æ”¶ä»»åŠ¡å¹¶æ ¹æ®ç­–ç•¥è¿›è¡Œæ™ºèƒ½è°ƒåº¦ã€‚

```bash
cd AgentOS/src/agentos/scheduler
python scheduler.py --master_addr 127.0.0.1:5000 --redis_ip 127.0.0.1 --redis_port 6380 --strategy mlq --flask_port 5001
```

### 4\. è¿è¡Œä¸€ä¸ªæ¼”ç¤ºä»»åŠ¡

æ‰€æœ‰æœåŠ¡å¯åŠ¨åï¼Œæ‚¨å¯ä»¥è¿è¡Œä¸€ä¸ªç¤ºä¾‹æ¥éªŒè¯ç³»ç»Ÿæ˜¯å¦å·¥ä½œæ­£å¸¸ã€‚

```bash
cd AgentOS/src/agentos/scheduler
python dispatch_task.py
```

-----

## ğŸ“Š Baseline (HEFT/CPOP) è¿è¡ŒæŒ‡å— {#baseline}

æ­¤éƒ¨åˆ†ä»‹ç»å¦‚ä½•ä»¥ç»å…¸çš„ HEFT æˆ– CPOP è°ƒåº¦ç®—æ³•æ¨¡å¼è¿è¡Œä¸€ä¸ªåŸºçº¿ç‰ˆæœ¬ã€‚

### 1\. å¯åŠ¨ Master èŠ‚ç‚¹

åœ¨ä¸»èŠ‚ç‚¹ä¸Šè¿è¡Œ `master_api.py`ã€‚å®ƒè´Ÿè´£æ¥æ”¶ä»»åŠ¡ã€è¿›è¡Œè°ƒåº¦å¹¶å°†ä»»åŠ¡åˆ†å‘ç»™ Slaver èŠ‚ç‚¹ã€‚

```bash
python master_api.py --host "172.17.0.3" --port 5002 --compute_nodes "172.17.0.3:5003,172.17.0.4:5003,172.17.0.5:5003,172.17.0.6:5003" --scheduler_strategy "heft"
```

**å‚æ•°è§£é‡Š**:

  * `--host "172.17.0.3"`: æŒ‡å®š Master èŠ‚ç‚¹è‡ªå·±çš„æœåŠ¡æ‰€ç›‘å¬çš„ IP åœ°å€ã€‚
  * `--port 5002`: æŒ‡å®š Master èŠ‚ç‚¹è‡ªå·±çš„æœåŠ¡æ‰€ç›‘å¬çš„ç«¯å£ã€‚
  * `--compute_nodes "..."`: **éå¸¸é‡è¦**ï¼Œæä¾›ä¸€ä¸ªæ‰€æœ‰ Slaver èŠ‚ç‚¹åœ°å€çš„åˆ—è¡¨ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰ã€‚Master å°†å‘è¿™äº›åœ°å€åˆ†å‘ä»»åŠ¡ã€‚
  * `--scheduler_strategy "heft"`: æŒ‡å®šä½¿ç”¨çš„è°ƒåº¦ç®—æ³•ã€‚å¯ä»¥æ˜¯ `heft` æˆ– `cpop`ã€‚

### 2\. å¯åŠ¨ Slaver èŠ‚ç‚¹

åœ¨æ‰€æœ‰è®¡ç®—èŠ‚ç‚¹ä¸Šï¼ˆåŒ…æ‹¬ä½œä¸ºè®¡ç®—èŠ‚ç‚¹çš„ä¸»èŠ‚ç‚¹ï¼‰åˆ†åˆ«è¿è¡Œ `slaver_api.py`ã€‚

```bash
# åœ¨èŠ‚ç‚¹ 1 ä¸Šè¿è¡Œ
python slaver_api.py --master_addr 172.17.0.3:5002 --host 172.17.0.3 --port 5003

# åœ¨èŠ‚ç‚¹ 2 ä¸Šè¿è¡Œ
python slaver_api.py --master_addr 172.17.0.3:5002 --host 172.17.0.4 --port 5003

# ...ä»¥æ­¤ç±»æ¨
```

**å‚æ•°è§£é‡Š**:

  * `--master_addr 172.17.0.3:5002`: Slaver éœ€è¦çŸ¥é“ Master çš„åœ°å€ï¼Œä»¥ä¾¿åœ¨ä»»åŠ¡å®Œæˆåå‘å…¶å‘é€**å›è°ƒé€šçŸ¥**ã€‚
  * `--host 172.17.0.3`: å½“å‰ Slaver èŠ‚ç‚¹è‡ªå·±çš„æœåŠ¡æ‰€ç›‘å¬çš„ IP åœ°å€ã€‚
  * `--port 5003`: å½“å‰ Slaver èŠ‚ç‚¹è‡ªå·±çš„æœåŠ¡æ‰€ç›‘å¬çš„ç«¯å£ã€‚

### 3\. åˆ†å‘ä¸€ä¸ª DAG ä»»åŠ¡

åœ¨ä»»æ„ä¸€å°å¯ä»¥è®¿é—® Master èŠ‚ç‚¹çš„æœºå™¨ä¸Šè¿è¡Œ `dispatch_task.py` æ¥æäº¤ä»»åŠ¡ã€‚

```bash
python dispatch_task.py --master_addr "172.17.0.3:5002"
```

**å‚æ•°è§£é‡Š**:

  * `--master_addr "172.17.0.3:5002"`: å‘Šè¯‰å®¢æˆ·ç«¯ Master çš„ API åœ°å€åœ¨å“ªé‡Œï¼Œä»¥ä¾¿å°†ä»»åŠ¡æäº¤è¿‡å»ã€‚

-----

## ğŸ¤– Agent æ¡†æ¶è¿è¡ŒæŒ‡å—

æ­¤éƒ¨åˆ†ä»‹ç»å¦‚ä½•è¿è¡Œä¸ AutoGen å’Œ AgentScope é›†æˆçš„æ¨¡å¼ã€‚

å¥½çš„ï¼Œæˆ‘å·²ç»è¯¦ç»†åˆ†æäº†æ‚¨æä¾›çš„æœ€æ–° AutoGen ä»£ç  (`run_host.py`, `run_worker.py`, `worker_agent.py`, `dispatch_task.py`)ï¼Œå¹¶ä¸ºæ‚¨æ›´æ–°äº† `readme.md` æ–‡ä»¶ä¸­å…³äº **AutoGen æ¨¡å¼** çš„éƒ¨åˆ†ã€‚

æ–°çš„ä»£ç å¼•å…¥äº†åŸºäºâ€œå·¥ä½œæµç±»å‹ (workflow type)â€çš„è·¯ç”±å’Œåˆ†å‘æœºåˆ¶ï¼Œä½¿å¾—æ¶æ„æ›´åŠ çµæ´»å’Œå¼ºå¤§ã€‚ä¸‹é¢çš„æ–‡æ¡£å†…å®¹åæ˜ äº†è¿™äº›æœ€æ–°çš„å˜åŒ–ã€‚

-----

### ğŸ¤– Agent æ¡†æ¶é›†æˆè¿è¡ŒæŒ‡å— {#zhinan}

æ­¤éƒ¨åˆ†ä»‹ç»å¦‚ä½•è¿è¡Œä¸ AutoGen å’Œ AgentScope é›†æˆçš„æ¨¡å¼ã€‚

### AutoGen æ¨¡å¼ {#autogen}

æ–°çš„ AutoGen æ¨¡å¼å¼•å…¥äº†åŸºäº **å·¥ä½œæµç±»å‹ (`workflow_type`)** çš„åŠ¨æ€ä»»åŠ¡è·¯ç”±æœºåˆ¶ã€‚ä¸»èŠ‚ç‚¹ (Host) ç®¡ç†ä¸åŒç±»å‹çš„ Agent æ± ï¼Œè€Œå·¥ä½œèŠ‚ç‚¹ (Worker) åœ¨å¯åŠ¨æ—¶å£°æ˜è‡ªå·±èƒ½å¤„ç†çš„ç‰¹å®šå·¥ä½œæµç±»å‹ï¼Œä»è€Œå®ç°æ›´çµæ´»å’Œä¸“ä¸šåŒ–çš„ä»»åŠ¡å¤„ç†ã€‚

#### 1\. å¯åŠ¨ä¸»èŠ‚ç‚¹ (Host)

ä¸»èŠ‚ç‚¹è´Ÿè´£ç›‘å¬æ¥è‡ª Worker çš„è¿æ¥ã€æ¥æ”¶å¤–éƒ¨æäº¤çš„ä»»åŠ¡ï¼Œå¹¶æ ¹æ®ä»»åŠ¡çš„ `workflow_type` å°†å…¶è·¯ç”±åˆ°åˆé€‚çš„ Agent æ± ã€‚

```bash
python run_host.py --host_addr 127.0.0.1:5003 --flask_port 5002 --agent_pools '{"gaia_file": ["agent1", "agent2"], "gaia_speech": ["agent3"]}'
```

**å‚æ•°è§£é‡Š**:

  * `--host_addr 127.0.0.1:5003`: ä¸»èŠ‚ç‚¹çš„æ ¸å¿ƒ gRPC æœåŠ¡åœ°å€ï¼Œä¾› Worker èŠ‚ç‚¹è¿æ¥ã€‚
  * `--flask_port 5002`: ç”¨äºæ¥æ”¶ DAG ä»»åŠ¡æäº¤çš„ Flask API æœåŠ¡ç«¯å£ã€‚
  * `--agent_pools '...'`: **(æ ¸å¿ƒå˜æ›´)** å®šä¹‰å·¥ä½œæµç±»å‹ä¸ Agent æ± çš„æ˜ å°„ã€‚è¿™æ˜¯ä¸€ä¸ª JSON æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚
      * **é”® (Key)**: ä»£è¡¨ä¸€ä¸ªå·¥ä½œæµç±»å‹ï¼Œä¾‹å¦‚ `"gaia_file"` æˆ– `"gaia_speech"`ã€‚è¿™ä¸ªç±»å‹ç”±ä»»åŠ¡æäº¤æ—¶æŒ‡å®šçš„ `dag_source` å’Œ `dag_type` ç»„åˆè€Œæˆã€‚
      * **å€¼ (Value)**: ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰èƒ½å¤Ÿå¤„ç†è¯¥ç±»å‹å·¥ä½œæµçš„ **Worker Agent çš„åç§°**ã€‚ä¸»èŠ‚ç‚¹å°†é€šè¿‡è½®è¯¢ (Round-Robin) æ–¹å¼å‘è¿™ä¸ªåˆ—è¡¨ä¸­çš„ Agent åˆ†å‘ä»»åŠ¡ã€‚

#### 2\. å¯åŠ¨å·¥ä½œèŠ‚ç‚¹ (Worker)

ä¸º Agent æ± ä¸­å®šä¹‰çš„æ¯ä¸€ä¸ª Agent åç§°ï¼Œéƒ½éœ€è¦å¯åŠ¨ä¸€ä¸ªå¯¹åº”çš„ Worker è¿›ç¨‹ã€‚Worker åœ¨å¯åŠ¨æ—¶éœ€è¦æ˜ç¡®æŒ‡å®šè‡ªå·±çš„åç§°å’Œå®ƒèƒ½å¤„ç†çš„å·¥ä½œæµç±»å‹ã€‚

```bash
# å¯åŠ¨å¤„ç† 'gaia_file' ç±»å‹çš„ç¬¬ä¸€ä¸ª Worker
python run_worker.py --host 127.0.0.1:5003 --name agent1 --workflow_type gaia_file

# å¯åŠ¨å¤„ç† 'gaia_file' ç±»å‹çš„ç¬¬äºŒä¸ª Worker
python run_worker.py --host 127.0.0.1:5003 --name agent2 --workflow_type gaia_file

# å¯åŠ¨å¤„ç† 'gaia_speech' ç±»å‹çš„ Worker
python run_worker.py --host 127.0.0.1:5003 --name agent3 --workflow_type gaia_speech
```

**å‚æ•°è§£é‡Š**:

  * `--host 127.0.0.1:5003`: éœ€è¦è¿æ¥çš„ä¸»èŠ‚ç‚¹ (Host) çš„åœ°å€ã€‚
  * `--name file_agent_1`: **(å¿…é¡»)** ä¸ºå½“å‰ Worker æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„åç§°ã€‚æ­¤åç§°**å¿…é¡»**ä¸å¯åŠ¨ä¸»èŠ‚ç‚¹æ—¶åœ¨ `--agent_pools` ä¸­å®šä¹‰çš„åç§°å®Œå…¨å¯¹åº”ã€‚
  * `--workflow_type gaia_file`: **(å¿…é¡»)** å£°æ˜æ­¤ Worker è¦å¤„ç†çš„å·¥ä½œæµç±»å‹ã€‚è¿™å†³å®šäº† Worker å°†åŠ è½½å“ªä¸€å¥—å…·ä½“çš„ä»»åŠ¡é€»è¾‘ï¼ˆä¾‹å¦‚ `GAIA_File_Process_Agent`ï¼‰ï¼Œå¹¶ä¸”**å¿…é¡»**ä¸ `--agent_pools` ä¸­çš„é”®åç›¸åŒ¹é…ã€‚

#### 3\. åˆ†å‘ DAG ä»»åŠ¡

åˆ†å‘ä»»åŠ¡çš„å‘½ä»¤ä¿æŒä¸å˜ã€‚å®¢æˆ·ç«¯é€šè¿‡ Flask API å°†ä»»åŠ¡æäº¤ç»™ä¸»èŠ‚ç‚¹ã€‚

```bash
python dispatch_task.py --master_addr "127.0.0.1:5002"
```

**å‚æ•°è§£é‡Š**:

  * `--master_addr "127.0.0.1:5002"`: å®¢æˆ·ç«¯å°†ä»»åŠ¡æäº¤åˆ°ä¸»èŠ‚ç‚¹ä¸Šè¿è¡Œçš„ã€ç«¯å£ä¸º `5002` çš„ä»»åŠ¡æ¥æ”¶æœåŠ¡ã€‚
  * **ä»»åŠ¡è·¯ç”±é€»è¾‘**: `dispatch_task.py` è„šæœ¬å†…éƒ¨ä¼šå®šä¹‰ä»»åŠ¡çš„ `dag_source` å’Œ `dag_type`ã€‚ä¸»èŠ‚ç‚¹ ä¼šå°†å®ƒä»¬ç»„åˆæˆ `workflow_type` (å¦‚ `gaia_file`)ï¼Œç„¶åæ ¹æ®è¿™ä¸ªç±»å‹åœ¨ `agent_pools` ä¸­æŸ¥æ‰¾å¯ç”¨çš„ Worker åˆ—è¡¨ï¼Œå¹¶å°†ä»»åŠ¡åˆ†å‘å‡ºå»ã€‚

**å‚æ•°è§£é‡Š**:

  * `--master_addr "172.17.0.3:5002"`: å®¢æˆ·ç«¯å°†ä»»åŠ¡æäº¤åˆ°ä¸»èŠ‚ç‚¹ä¸Šè¿è¡Œçš„ã€ç«¯å£ä¸º `5002` çš„ä»»åŠ¡æ¥æ”¶æœåŠ¡ã€‚

Of course. Based on the provided Python files for your AgentScope integration, I have prepared a comprehensive `readme.md` section. This guide details the updated architecture and provides clear, step-by-step instructions for running your system.

-----

### ğŸ¤– AgentScope æ¨¡å¼è¿è¡ŒæŒ‡å— {#agentscope}

æ­¤æ¨¡å¼åˆ©ç”¨ AgentScope çš„ RPC (Remote Procedure Call) åŠŸèƒ½æ„å»ºä¸€ä¸ªåˆ†å¸ƒå¼ Agent ç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿç”±ä¸€ä¸ªä¸­å¿ƒ **ä¸»èŠ‚ç‚¹ (Host)** å’Œå¤šä¸ª **å·¥ä½œèŠ‚ç‚¹ (Worker)** ç»„æˆã€‚ä¸»èŠ‚ç‚¹è´Ÿè´£æ¥æ”¶ä»»åŠ¡å¹¶å°†å…¶æ™ºèƒ½åˆ†å‘ç»™ç›¸åº”çš„ Workerï¼Œè€Œ Worker è´Ÿè´£å®é™…æ‰§è¡Œä»»åŠ¡ã€‚

#### æ¶æ„æ€»è§ˆ

1.  **ä¸»èŠ‚ç‚¹ (Host)**: è¿è¡Œ `run_host.py`ã€‚å®ƒä¸ç›´æ¥æ‰§è¡Œä»»åŠ¡ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒã€‚å®ƒé€šè¿‡ä¸€ä¸ª Flask API æ¥æ”¶å¤–éƒ¨ä»»åŠ¡ï¼Œå¹¶æ ¹æ®é¢„å®šä¹‰çš„ **Agent æ±  (`agent_pools`)** é…ç½®ï¼Œå°†ä»»åŠ¡ä»¥è½®è¯¢æ–¹å¼åˆ†å‘ç»™æŒ‡å®šçš„ Worker åœ°å€ã€‚
2.  **å·¥ä½œèŠ‚ç‚¹ (Worker)**: è¿è¡Œ `run_worker.py`ã€‚æ¯ä¸ª Worker å¯åŠ¨ä¸€ä¸ª AgentScope RPC æœåŠ¡ï¼Œç›‘å¬åœ¨ç‰¹å®šçš„ä¸»æœºå’Œç«¯å£ä¸Šã€‚Worker åœ¨å¯åŠ¨æ—¶å£°æ˜è‡ªå·±çš„åç§° (`agent_name`) å’Œèƒ½å¤Ÿå¤„ç†çš„å·¥ä½œæµç±»å‹ (`workflow_types`)ã€‚
3.  **ä»»åŠ¡æäº¤é€šçŸ¥ (Client)**: `dispatch_task.py` æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯è„šæœ¬ï¼Œå®ƒé€šè¿‡ HTTP è¯·æ±‚å°†ä¸€æ‰¹ä»»åŠ¡æäº¤ç»™ä¸»èŠ‚ç‚¹çš„ Flask APIï¼Œå¹¶è½®è¯¢ä»»åŠ¡çŠ¶æ€ç›´åˆ°æ‰€æœ‰ä»»åŠ¡å®Œæˆã€‚

-----

### è¿è¡Œæ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨ä¸»èŠ‚ç‚¹ (Host)

ä¸»èŠ‚ç‚¹æ˜¯ç³»ç»Ÿçš„â€œå¤§è„‘â€ï¼Œå¿…é¡»é¦–å…ˆå¯åŠ¨ã€‚å®ƒéœ€è¦çŸ¥é“æ‰€æœ‰ Worker çš„åœ°å€ä¿¡æ¯ï¼Œä»¥ä¾¿è¿›è¡Œä»»åŠ¡åˆ†å‘ã€‚

```bash
python run_host.py --port 5002 --agent_pools '{"gaia_file":["file_agent@127.0.0.1:6001"], "gaia_vision":["vision_agent@127.0.0.1:6002"], "gaia_speech":["speech_agent@127.0.0.1:6003"], "gaia_reason":["reason_agent@127.0.0.1:6004"]}'
```

**å‚æ•°è§£é‡Š**:

  * `--port 5002`: æŒ‡å®šä¸»èŠ‚ç‚¹ä¸Šç”¨äºæ¥æ”¶ä»»åŠ¡çš„ Flask API çš„ç›‘å¬ç«¯å£ã€‚
  * `--agent_pools '<JSON_STRING>'`: **(æ ¸å¿ƒé…ç½®)** å®šä¹‰äº†å·¥ä½œæµç±»å‹åˆ° Worker çš„æ˜ å°„ã€‚
      * **é”® (Key)**: å·¥ä½œæµç±»å‹ï¼Œä¾‹å¦‚ `"gaia_file"`ã€‚
      * **å€¼ (Value)**: ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«èƒ½å¤Ÿå¤„ç†è¯¥ç±»å‹ä»»åŠ¡çš„ Worker çš„ IDã€‚ID æ ¼å¼ä¸º `"agent_name@host:port"`ã€‚è¿™é‡Œçš„åœ°å€å’Œç«¯å£å¿…é¡»ä¸ä¹‹åå¯åŠ¨ Worker è¿›ç¨‹æ—¶ä½¿ç”¨çš„å®Œå…¨ä¸€è‡´ã€‚

#### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨å·¥ä½œèŠ‚ç‚¹ (Worker)

æ ¹æ®ä¸»èŠ‚ç‚¹ `--agent_pools` ä¸­çš„é…ç½®ï¼Œä¸ºæ¯ä¸€ä¸ª Worker åœ°å€å¯åŠ¨ä¸€ä¸ªå¯¹åº”çš„ `run_worker.py` è¿›ç¨‹ã€‚

**ç¤ºä¾‹ Worker å¯åŠ¨å‘½ä»¤:**

```bash
# å¯åŠ¨å¤„ç† 'gaia_file' ç±»å‹çš„ Worker
# å¯¹åº” agent_pools ä¸­çš„ "file_agent@127.0.0.1:6001"
python run_worker.py --host 127.0.0.1 --port 6001 --agent_name file_agent --workflow_types gaia_file

# å¯åŠ¨å¤„ç† 'gaia_vision' ç±»å‹çš„ Worker
# å¯¹åº” agent_pools ä¸­çš„ "vision_agent@127.0.0.1:6002"
python run_worker.py --host 127.0.0.1 --port 6002 --agent_name vision_agent --workflow_types gaia_vision

# å¯åŠ¨å¤„ç† 'gaia_speech' ç±»å‹çš„ Worker
# å¯¹åº” agent_pools ä¸­çš„ "speech_agent@127.0.0.1:6003"
python run_worker.py --host 127.0.0.1 --port 6003 --agent_name speech_agent --workflow_types gaia_speech

# å¯åŠ¨å¤„ç† 'gaia_reason' ç±»å‹çš„ Worker
# å¯¹åº” agent_pools ä¸­çš„ "reason_agent@127.0.0.1:6004"
python run_worker.py --host 127.0.0.1 --port 6004 --agent_name reason_agent --workflow_types gaia_reason
```

**å‚æ•°è§£é‡Š**:

  * `--host 127.0.0.1`: å½“å‰ Worker æœåŠ¡ç›‘å¬çš„ IP åœ°å€ã€‚
  * `--port 6001`: å½“å‰ Worker æœåŠ¡ç›‘å¬çš„ç«¯å£ã€‚**æ­¤ç«¯å£å¿…é¡»ä¸ä¸»èŠ‚ç‚¹ `agent_pools` ä¸­ä¸ºå®ƒé…ç½®çš„ç«¯å£å®Œå…¨ä¸€è‡´**ã€‚
  * `--agent_name file_agent`: ä¸ºæ­¤ Worker ä¸Šçš„ Agent æŒ‡å®šåç§°ã€‚**æ­¤åç§°å¿…é¡»ä¸ä¸»èŠ‚ç‚¹ `agent_pools` ä¸­ä¸ºå®ƒé…ç½®çš„åç§°å®Œå…¨ä¸€è‡´**ã€‚
  * `--workflow_types gaia_file`: å£°æ˜æ­¤ Worker èƒ½å¤Ÿå¤„ç†çš„å·¥ä½œæµç±»å‹ï¼Œå¯ä»¥æ˜¯ç”¨é€—å·åˆ†éš”çš„å¤šä¸ªç±»å‹ã€‚

#### ç¬¬ä¸‰æ­¥ï¼šåˆ†å‘ DAG ä»»åŠ¡

åœ¨æ‰€æœ‰ä¸»èŠ‚ç‚¹å’Œå·¥ä½œèŠ‚ç‚¹éƒ½æˆåŠŸå¯åŠ¨åï¼Œè¿è¡Œ `dispatch_task.py` è„šæœ¬æ¥æäº¤ä¸€æ‰¹é¢„å®šä¹‰çš„ä»»åŠ¡ã€‚

```bash
python dispatch_task.py --master_addr "127.0.0.1:5002"
```

**å‚æ•°è§£é‡Š**:

  * `--master_addr "127.0.0.1:5002"`: å‘Šè¯‰å®¢æˆ·ç«¯ä¸»èŠ‚ç‚¹çš„ Flask API åœ°å€ï¼Œä»¥ä¾¿æäº¤ä»»åŠ¡ã€‚

è„šæœ¬ä¼šæäº¤ä»»åŠ¡ï¼Œç„¶åæŒç»­è½®è¯¢æ¯ä¸ªä»»åŠ¡çš„çŠ¶æ€ï¼Œç›´åˆ°æ‰€æœ‰ä»»åŠ¡å®Œæˆæˆ–è¶…æ—¶ï¼Œå¹¶æœ€ç»ˆæ‰“å°å‡ºæ‰§è¡Œç»“æœã€‚
